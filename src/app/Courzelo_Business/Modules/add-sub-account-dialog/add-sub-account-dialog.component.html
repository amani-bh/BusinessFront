<div class="section-title mt-50">
    <h3>Add Sub Account</h3>
</div> <!-- section title -->


<div class="close-btn">
    <button mat-icon-button mat-dialog-close>
        <mat-icon>cancel</mat-icon>
    </button>
</div>

<div class="diag-content">
 
    <div class="main-form pt-45">
        <mat-stepper  linear #stepper>
            <mat-step [stepControl]="firstForm">
                <ng-template matStepLabel>Sub-Account Information</ng-template>
                <form id="first-form" #f="ngForm" [formGroup]="firstForm" autocomplete="off" novalidate>
                    <div class="row mt-3">
                       
                        <div class="col-md-6 mb-5">
                            <div class="singel-form ">
                                <mat-form-field >
                                    <input matInput formControlName="firstName"  placeholder="First Name" >
                                   <mat-error > field is obligatory</mat-error> 
                                  </mat-form-field>
                            </div> <!-- singel form -->
                        </div>
                        <div class="col-md-6">
                            <div class="singel-form ">
                                <mat-form-field >
                                    <input matInput formControlName="lastName"  placeholder="Last Name" >
                                  <mat-error> field is obligatory</mat-error> 
                                 </mat-form-field>
                            </div> <!-- singel form -->
                        </div>

                        <div class="col-md-6">
                            <div class="singel-form ">
                                <mat-form-field >
                                    <input matInput formControlName="email" type="email" placeholder="Email address" (keyup)="ExistMail(this.firstForm.get('email')?.value)">
                                  <mat-error >email field is obligatory</mat-error> 
                                  <span class="email-error" *ngIf="verifMail==true" >email already exist</span> 
                                 </mat-form-field>
                             
                            </div> <!-- singel form -->
                        </div>

                        <div class="col-md-6">
                            <div class="singel-form">
                                 <mat-form-field >
                                  <input matInput  formControlName="phone" type="text" placeholder="phone"   > 
                                  </mat-form-field>
                            </div> <!-- singel form -->
                        </div>

                        <div class="col-md-6 mt-5">
                            <div class="singel-form ">
                                <mat-form-field>
                                    <input matInput formControlName="password" type="password" placeholder="password"  >
                                    <mat-error *ngIf="firstForm.hasError('required', 'password') "> field password is obligatory</mat-error> 
                                   
                                    
                                            <span class="span-error" *ngIf="match()===false;">Password should be atleast 8 characters long
                                              and should contain one number,one character and one special
                                              character
                                            </span>
                                        
                                    </mat-form-field>
                             
                            </div> <!-- singel form -->
                        </div>
                        <div class="col-md-6 mt-5">
                            <div class="singel-form ">
                                <mat-form-field >
                                    <input matInput formControlName="confirmPassword" type="password" placeholder="confirm password" [errorStateMatcher]="matcher" >
                                  <mat-error  *ngIf="!firstForm.hasError('required', 'confirmPassword') && firstForm.hasError('notSame')" >password is not matching</mat-error> 
                                  <mat-error  *ngIf="firstForm.hasError('required', 'confirmPassword')" >Field is empty</mat-error> 
                                 </mat-form-field>
                            
                            </div> <!-- singel form -->
                        </div>
                        <div class="action-btn">
                                <button mat-button *ngIf="firstForm.valid && verifMail!=true" class="main-btn" matStepperNext>Next</button>
                                <button  matTooltip="please verify and complete the needed fields" *ngIf="!firstForm.valid || verifMail==true "  (click)="validateAllFormFields(firstForm)" class="invalid-btn" matTooltip="please complete the needed fields">Next</button>     
                        </div> 
                    </div> <!-- row -->
                </form>
            </mat-step>
            <mat-step [stepControl]="secondForm">
                <ng-template matStepLabel>Access management</ng-template>
                <form id="second-form" #f="ngForm" [formGroup]="secondForm" autocomplete="off" novalidate>
                    <div class="row">
                       
                        
                        <div class="col-md-12">
                            <div class="singel-form ">
                                <mat-checkbox class="example-margin" formControlName="offerChk">Job offer management</mat-checkbox>
                            </div> <!-- singel form -->
                        </div>
                        <div class="col-md-12">
                            <div class="singel-form ">
                                <mat-checkbox class="example-margin" formControlName="applicationChk">Application management</mat-checkbox>
                            </div> <!-- singel form -->
                        </div>

                        <div class="col-md-12">
                            <div class="singel-form ">
                                <mat-checkbox class="example-margin" formControlName="testChk">Test management</mat-checkbox>
                            </div> <!-- singel form -->
                        </div>
                        <div class="col-md-12">
                            <div class="singel-form ">
                                <mat-checkbox class="example-margin" formControlName="profileChk">Profile management</mat-checkbox>
                            </div> <!-- singel form -->
                        </div>
                    
                  
                        
                       
                        <div class="scd-action-btn col-md-12">
                                <button mat-button  class="second-btn" matStepperNext>previous</button>
                                <button mat-button *ngIf="secondForm.get('offerChk')?.value==true ||secondForm.get('applicationChk')?.value==true||secondForm.get('testChk')?.value==true||secondForm.get('profileChk')?.value==true" class="main-btn" matStepperNext (click)="Send()">Done</button>
                                <button  matTooltip="please verify and complete the needed fields" *ngIf="secondForm.get('offerChk')?.value==false && secondForm.get('applicationChk')?.value==false && secondForm.get('testChk')?.value==false && secondForm.get('profileChk')?.value==false" class="invalid-btn" matTooltip="please complete the needed fields">Done</button>     
                        </div> 
                    </div> <!-- row -->
                </form>
            </mat-step>
            <mat-step>
              <ng-template matStepLabel>Done</ng-template>
              <p>The sub account has now been sucessfully created</p>
              
            </mat-step>
          </mat-stepper>
        
    </div> <!-- main form -->
   
</div>


